(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{134:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(68),u=n.n(s),c=(n(77),n(6)),i=n(7),o=n(9),l=n(8),d=n(10),S=(n(78),n(4)),p=n.n(S),E=n(3),h={USER_SIGN_IN:"USER_SIGN_IN",USER_SIGN_OUT:"USER_SIGN_OUT",USER_SIGN_UP_SUCCESS:"USER_SIGN_UP_SUCCESS",USER_SIGN_UP_FAILED:"USER_SIGN_UP_FAILED",USER_SIGN_IN_SUCCESS:"USER_SIGN_IN_SUCCESS",USER_SIGN_IN_FAILED:"USER_SIGN_IN_FAILED",USER_SIGN_OUT_SUCCESS:"USER_SIGN_OUT_SUCCESS",USER_SIGN_OUT_FAILED:"USER_SIGN_OUT_FAILED",SEND_MESSAGE_SUCCESS:"SEND_MESSAGE_SUCCESS",SEND_MESSAGE_FAILED:"SEND_MESSAGE_FAILED",UPDATE_CURRENT_USER:"UPDATE_CURRENT_USER",UPDATE_USERS_LIST:"UPDATE_USERS_LIST",UPDATE_MESSAGES_LIST:"UPDATE_MESSAGES_LIST",INSERT_CHAT_BOX:"INSERT_CHAT_BOX",CLOSE_CHAT_BOX:"CLOSE_CHAT_BOX",CLEAR_CHAT_BOXES:"CLEAR_CHAT_BOXES",SHOW_LOADER:"SHOW_LOADER",HIDE_LOADER:"HIDE_LOADER",SHOW_ERROR:"SHOW_ERROR",HIDE_ERROR:"HIDE_ERROR",SHOW_CONGRTATS:"SHOW_CONGRTATS",HIDE_CONGRTATS:"HIDE_CONGRTATS"};function m(e){return function(t){p.a.auth().signOut().then(function(n){p.a.database().ref("users/".concat(e,"/isActive")).set(!1).then(function(e){t({type:h.USER_SIGN_OUT_SUCCESS,payload:!0})})}).catch(function(e){t(function(e){return{type:h.USER_SIGN_OUT_FAILED,payload:{success:!1,err:e}}}(e))})}}var f=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).handleLogOut=function(){n.props.signOutUser(n.props.currentUser.userUid)},n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e){this.props!==e&&this.props.signOutSuccessStatus&&this.props.clearChatBoxes({})}},{key:"render",value:function(){return r.a.createElement("div",{id:"headerContainer"},r.a.createElement("header",{id:"header"},r.a.createElement("div",{id:"headerLeft"},r.a.createElement("h3",null,"BINGO CHAT APP")),0!==Object.entries(this.props.currentUser).length?r.a.createElement("div",{id:"headerRight"},r.a.createElement("h3",null,this.props.currentUser.userName),r.a.createElement("button",{onClick:this.handleLogOut},"Log Out")):null),r.a.createElement("hr",null))}}]),t}(a.Component),_=Object(E.b)(function(e){return{currentUser:e.currentUser.data,signOutSuccessStatus:e.signOutStatus.success,signOutError:e.signOutStatus.error}},function(e){return{signOutUser:function(t){e(m(t))},clearChatBoxes:function(t){e(function(e){return{type:h.CLEAR_CHAT_BOXES,payload:e}}(t))}}})(f);var U=Object(E.b)(function(e){return{currentUser:e.currentUser.data,users:e.usersList.data,chatBoxes:e.chatBoxesList.data}},function(e){return{insertChatBox:function(t){e(function(e){return{type:h.INSERT_CHAT_BOX,payload:e}}(t))}}})(function(e){var t=[];0!==Object.entries(e.currentUser).length&&(t=e.users.filter(function(t){return t.userUid!==e.currentUser.userUid}));return r.a.createElement("div",{id:"users-list-container"},r.a.createElement("h3",{className:"user-list-head"},"Users List"),r.a.createElement("ul",{className:"user-list"},t.map(function(t){return r.a.createElement("li",{key:t.userUid,onClick:function(){return n=t,void(e.chatBoxes.hasOwnProperty(n.userUid)||e.insertChatBox(n));var n}},"".concat(t.userName," (").concat(t.isActive?"Online":"Offline",")"))})),r.a.createElement("hr",null))}),g=n(13),v=function(e){return r.a.createElement("input",{type:e.type,id:e.id,name:e.name,value:e.value,onChange:function(t){return e.handleOnChange(t)}})},I=r.a.forwardRef(function(e,t){return r.a.createElement("input",{type:e.type,defaultValue:e.defaultValue,ref:t,id:e.id})});function O(e,t,n){return function(a){p.a.auth().createUserWithEmailAndPassword(t,n).then(function(t){var n=t.user.uid,r={userUid:n,userName:e,userEmail:t.user.email,isActive:!1};p.a.database().ref("users/".concat(n)).set(r).then(function(){a({type:h.USER_SIGN_UP_SUCCESS,payload:!0})}).catch(function(e){a(C(e))})}).catch(function(e){a(C(e))})}}function C(e){return{type:h.USER_SIGN_UP_FAILED,payload:{success:!1,err:e}}}var b=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={userName:"",userEmail:"",userPass:""},n.handleChange=function(e){n.setState(Object(g.a)({},e.target.name,e.target.value))},n.handleSignUp=function(e){e.preventDefault(),n.props.makeNewUser(n.state.userName,n.state.userEmail,n.state.userPass)},n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e){this.props!==e&&this.props.signUpSuccessStatus&&this.setState({userName:"",userEmail:"",userPass:""})}},{key:"render",value:function(){return r.a.createElement("div",{id:"sign-up-form"},r.a.createElement("h3",null,"Sign Up Form"),r.a.createElement("form",{id:"sign-up-form",onSubmit:this.handleSignUp},r.a.createElement("label",{htmlFor:"userName"},"Name: "),r.a.createElement(v,{type:"text",id:"userName",name:"userName",value:this.state.userName,handleOnChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"userEmail"},"Email: "),r.a.createElement(v,{type:"text",id:"userEmail",name:"userEmail",value:this.state.userEmail,handleOnChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"userPass"},"Password: "),r.a.createElement(v,{type:"password",id:"userPass",name:"userPass",value:this.state.userPass,handleOnChange:this.handleChange}),r.a.createElement("button",{type:"submit",className:"submit-btn"},"Sign Up")))}}]),t}(a.Component),y=Object(E.b)(function(e){return{signUpSuccessStatus:e.signUpStatus.success,signUpError:e.signUpStatus.error}},function(e){return{makeNewUser:function(t,n,a){e(O(t,n,a))}}})(b);function A(e,t){return function(n){p.a.auth().signInWithEmailAndPassword(e,t).then(function(e){n({type:h.USER_SIGN_IN_SUCCESS,payload:!0})}).catch(function(e){n(function(e){return{type:h.USER_SIGN_IN_FAILED,payload:{success:!1,err:e}}}(e))})}}var N=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={userSignInEmail:"",userSignInPass:""},n.handleChange=function(e){n.setState(Object(g.a)({},e.target.name,e.target.value))},n.handleSignIn=function(e){e.preventDefault(),n.props.signInUser(n.state.userSignInEmail,n.state.userSignInPass)},n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e){this.props!==e&&this.props.signInSuccessStatus&&this.setState({userSignInEmail:"",userSignInPass:""})}},{key:"render",value:function(){return r.a.createElement("div",{id:"sign-in-form"},r.a.createElement("h3",null,"Sign In Form"),r.a.createElement("form",{id:"sign-in-form",onSubmit:this.handleSignIn},r.a.createElement("label",{htmlFor:"userSignInEmail"},"Email: "),r.a.createElement(v,{type:"text",id:"userSignInEmail",name:"userSignInEmail",value:this.state.userSignInEmail,handleOnChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"userSignInPass"},"Password: "),r.a.createElement(v,{type:"password",id:"userSignInPass",name:"userSignInPass",value:this.state.userSignInPass,handleOnChange:this.handleChange}),r.a.createElement("button",{type:"submit",className:"submit-btn"},"Sign In")))}}]),t}(a.Component),R=Object(E.b)(function(e){return{signInSuccessStatus:e.signInStatus.success,signInError:e.signInStatus.error}},function(e){return{signInUser:function(t,n){e(A(t,n))}}})(N);function T(e){return function(t){p.a.database().ref("messages").push(e).then(function(e){t({type:h.SEND_MESSAGE_SUCCESS,payload:!0})}).catch(function(e){t(function(e){return{type:h.SEND_MESSAGE_FAILED,payload:{success:!1,err:e}}}(e))})}}var L=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(o.a)(this,Object(l.a)(t).call(this,e))).handleSubmit=function(e,t){t.preventDefault();var a=n.textInput.current.value;if(""!==a){var r={senderId:n.props.currentUser.userUid,receiverId:e.userUid,message:a,senderName:n.props.currentUser.userName};n.props.sendMessage(r)}},n.handleChatBoxClose=function(e){var t=n.props.chatBoxes;delete t[e.userUid],n.props.closeChatBox(t)},n.textInput=r.a.createRef(),n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e){this.props!==e&&this.props.sendMessageSuccessStatus&&(this.textInput.current.value="")}},{key:"render",value:function(){var e=this,t=this.props,n=t.messages,a=t.data,s=n.filter(function(t){return t.senderId===a.userUid&&t.receiverId===e.props.currentUser.userUid||t.senderId===e.props.currentUser.userUid&&t.receiverId===a.userUid});return r.a.createElement("div",{id:"chatbox",key:this.props.key},r.a.createElement("h3",null,"Chat started with: ",a.userName),r.a.createElement("hr",null),r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(a,t)}},r.a.createElement("label",{htmlFor:"messageInput"},"Message: "),r.a.createElement(I,{type:"text",defaultValue:"",ref:this.textInput,id:"messageInput".concat(a.userUid)}),r.a.createElement("button",{type:"submit"},"Send")),r.a.createElement("h4",null,"Messages:"),r.a.createElement("div",null,r.a.createElement("ul",null,s.map(function(t,n){return r.a.createElement("li",{key:n},"".concat(t.message," <== ").concat(t.senderName===e.props.currentUser.userName?"You":t.senderName))}))),r.a.createElement("button",{onClick:function(){return e.handleChatBoxClose(a)}},"Close Chat Box"))}}]),t}(a.Component),D=Object(E.b)(function(e){return{currentUser:e.currentUser.data,messages:e.messagesList.data,sendMessageSuccessStatus:e.sendMessageStatus.success,sendMessageError:e.sendMessageStatus.error,chatBoxes:e.chatBoxesList.data}},function(e){return{sendMessage:function(t){e(T(t))},closeChatBox:function(t){var n;e((n=t,{type:h.CLOSE_CHAT_BOX,payload:n}))}}})(L),w=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;p.a.database().ref("/").on("value",function(t){var n=null===t.val()?{}:t.val(),a=n.users?Object.values(n.users):[],r=n.messages?Object.values(n.messages):[];e.props.updateUsersList(a),e.props.updateMessagesList(r),p.a.auth().onAuthStateChanged(function(t){t?p.a.database().ref("users/".concat(t.uid,"/isActive")).set(!0).then(function(){var n=e.props.users.filter(function(e){return e.userUid===t.uid});e.props.updateCurrentUser(n[0])}):e.props.updateCurrentUser({})})})}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(_,null),0===Object.entries(this.props.currentUser).length?r.a.createElement("div",{id:"forms-container"},r.a.createElement(y,null),r.a.createElement("hr",null),r.a.createElement(R,null)):null,0!==Object.entries(this.props.currentUser).length?r.a.createElement(U,null):null,r.a.createElement("div",{className:"chatbox-container"},Object.values(this.props.chatBoxes).map(function(e){return r.a.createElement(D,{data:e,key:e.userUid})})))}}]),t}(a.Component),j=Object(E.b)(function(e){return{currentUser:e.currentUser.data,users:e.usersList.data,chatBoxes:e.chatBoxesList.data}},function(e){return{updateCurrentUser:function(t){e(function(e){return{type:h.UPDATE_CURRENT_USER,payload:e}}(t))},updateUsersList:function(t){e(function(e){return{type:h.UPDATE_USERS_LIST,payload:e}}(t))},updateMessagesList:function(t){e(function(e){return{type:h.UPDATE_MESSAGES_LIST,payload:e}}(t))}}})(w),G=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function P(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var k=n(70),B=n.n(k),x=n(24),M=n(71),H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.UPDATE_CURRENT_USER:return{data:t.payload};default:return e}},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.UPDATE_USERS_LIST:return{data:t.payload};default:return e}},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.UPDATE_MESSAGES_LIST:return{data:t.payload};default:return e}},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{success:!1,error:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.USER_SIGN_UP_SUCCESS:return{success:t.payload};case h.USER_SIGN_UP_FAILED:return{success:t.payload.success,error:t.payload.err};default:return e}},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{success:!1,error:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.USER_SIGN_IN_SUCCESS:return{success:t.payload};case h.USER_SIGN_IN_FAILED:return{success:t.payload.success,error:t.payload.err};default:return e}},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{success:!1,error:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.USER_SIGN_OUT_SUCCESS:return{success:t.payload};case h.USER_SIGN_OUT_FAILED:return{success:t.payload.success,error:t.payload.err};default:return e}},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{success:!1,error:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.SEND_MESSAGE_SUCCESS:return{success:t.payload};case h.SEND_MESSAGE_FAILED:return{success:t.payload.success,error:t.payload.err};default:return e}},K=n(53),Y={currentUser:H,usersList:F,messagesList:W,signUpStatus:X,signInStatus:V,signOutStatus:z,sendMessageStatus:J,chatBoxesList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.INSERT_CHAT_BOX:return{data:Object(K.a)({},e.data,Object(g.a)({},t.payload.userUid,t.payload))};case h.CLOSE_CHAT_BOX:var n=t.payload;return{data:Object(K.a)({},n)};case h.CLEAR_CHAT_BOXES:return{data:t.payload};default:return e}}},$=Object(x.d)(Object(x.c)(Y),{},Object(x.a)(M.a));B.a.initializeApp({apiKey:"AIzaSyAv71-5itSOzD_bYlMA7am1tK5PW2hmIVs",authDomain:"amlakhani-chatapp.firebaseapp.com",databaseURL:"https://amlakhani-chatapp.firebaseio.com",projectId:"amlakhani-chatapp",storageBucket:"amlakhani-chatapp.appspot.com",messagingSenderId:"451241892358"}),u.a.render(r.a.createElement(E.a,{store:$},r.a.createElement(j,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/chat-app-react-redux-firebase",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/chat-app-react-redux-firebase","/service-worker.js");G?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):P(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):P(t,e)})}}()},72:function(e,t,n){e.exports=n(134)},77:function(e,t,n){},78:function(e,t,n){}},[[72,1,2]]]);
//# sourceMappingURL=main.2a93e211.chunk.js.map